<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Modern Engineering Calculator">
    <title>Engineering Calculator</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Roboto+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Icons -->
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />

    <!-- Style -->
    <link rel="stylesheet" href="./css/style.css">

</head>

<body
    class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-inter h-screen flex items-center justify-center p-4 transition-colors duration-300">

    <main
        class="w-full max-w-md bg-white dark:bg-gray-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col h-[90vh] max-h-[850px] relative transition-colors duration-300">

        <!-- Header -->
        <header class="flex justify-between items-center p-4 z-10">
            <div class="flex items-center gap-2">
                <button id="btn-history-toggle"
                    class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                    aria-label="Toggle History">
                    <span class="material-symbols-rounded text-xl">history</span>
                </button>
                <div class="text-xs font-medium px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-lg text-gray-600 dark:text-gray-300 transition-colors"
                    id="angle-mode-indicator">
                    RAD
                </div>
            </div>

            <div class="flex items-center gap-2">
                <button id="btn-theme-toggle"
                    class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                    aria-label="Toggle Theme">
                    <span class="material-symbols-rounded text-xl" id="theme-icon">dark_mode</span>
                </button>
                <button id="btn-settings"
                    class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                    aria-label="Settings">
                    <span class="material-symbols-rounded text-xl">settings</span>
                </button>
            </div>
        </header>

        <!-- Display -->
        <section class="flex-1 flex flex-col justify-end p-6 pt-0 relative z-0">
            <!-- Previous calculation / History preview -->
            <div id="display-history"
                class="text-right text-gray-500 dark:text-gray-400 text-sm mb-1 min-h-[1.25rem] truncate transition-colors">

            </div>

            <!-- Current Expression -->
            <div id="display-expression"
                class="text-right text-3xl font-light tracking-wide break-all mb-2 transition-all duration-200 min-h-[2.5rem]">

            </div>

            <!-- Result -->
            <div id="display-result"
                class="text-right text-5xl font-semibold font-roboto-mono text-primary-600 dark:text-primary-400 transition-all duration-200 min-h-[3.75rem]">
                0
            </div>
        </section>

        <!-- Keypad -->
        <section
            class="bg-gray-50 dark:bg-gray-900/50 p-4 pb-6 rounded-t-3xl backdrop-blur-sm transition-colors duration-300">

            <!-- Scientific Functions -->
            <div class="grid grid-cols-5 gap-2 mb-4">
                <button class="btn-sci" data-op="sin(">sin</button>
                <button class="btn-sci" data-op="cos(">cos</button>
                <button class="btn-sci" data-op="tan(">tan</button>
                <button class="btn-sci" data-op="log(">log</button>
                <button class="btn-sci" data-op="ln(">ln</button>

                <button class="btn-sci" data-op="(">(</button>
                <button class="btn-sci" data-op=")">)</button>
                <button class="btn-sci" data-op="^">^</button>
                <button class="btn-sci" data-op="sqrt(">√</button>
                <button class="btn-sci" data-op="pi">π</button>
            </div>

            <!-- Main Keypad -->
            <div class="grid grid-cols-4 gap-3">
                <button class="btn-func text-red-500 dark:text-red-400" data-action="all-clear">AC</button>
                <button class="btn-func" data-action="backspace">⌫</button>
                <button class="btn-func" data-op="%">%</button>
                <button class="btn-op" data-op="/">÷</button>

                <button class="btn-num" data-num="7">7</button>
                <button class="btn-num" data-num="8">8</button>
                <button class="btn-num" data-num="9">9</button>
                <button class="btn-op" data-op="*">×</button>

                <button class="btn-num" data-num="4">4</button>
                <button class="btn-num" data-num="5">5</button>
                <button class="btn-num" data-num="6">6</button>
                <button class="btn-op" data-op="-">−</button>

                <button class="btn-num" data-num="1">1</button>
                <button class="btn-num" data-num="2">2</button>
                <button class="btn-num" data-num="3">3</button>
                <button class="btn-op" data-op="+">+</button>

                <button class="btn-func" data-action="toggle-sign">+/-</button>
                <button class="btn-num" data-num="0">0</button>
                <button class="btn-num" data-num=".">.</button>
                <button
                    class="btn-op bg-primary-600 hover:bg-primary-700 text-white shadow-lg shadow-primary-500/30 dark:shadow-primary-900/30"
                    data-action="calculate">=</button>
            </div>
        </section>

        <!-- History Panel -->
        <div id="history-panel"
            class="absolute inset-0 bg-white dark:bg-gray-800 z-20 transform translate-x-full transition-transform duration-300 flex flex-col">
            <div class="flex justify-between items-center p-4 border-b dark:border-gray-700">
                <h2 class="text-lg font-semibold text-gray-800 dark:text-white">History</h2>
                <button id="btn-history-close"
                    class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </div>
            <div id="history-list" class="flex-1 overflow-y-auto p-4 space-y-2">
                <!-- History Items will be injected here -->
            </div>
            <div class="p-4 border-t dark:border-gray-700">
                <button id="btn-history-clear"
                    class="w-full py-3 rounded-xl border border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors font-medium">
                    Clear History
                </button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div id="settings-modal"
            class="absolute inset-0 bg-black/50 z-30 hidden flex items-center justify-center p-4 backdrop-blur-sm opacity-0 transition-opacity duration-200">
            <div class="bg-white dark:bg-gray-800 w-full max-w-sm rounded-2xl shadow-xl p-6 transform scale-95 transition-transform duration-200"
                id="settings-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white">Settings</h2>
                    <button id="btn-settings-close"
                        class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>

                <div class="space-y-6">
                    <!-- Angle Mode -->
                    <div class="flex flex-col gap-2">
                        <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Default Angle Mode</label>
                        <div class="flex bg-gray-100 dark:bg-gray-700 rounded-lg p-1">
                            <button
                                class="flex-1 py-2 rounded-md text-sm font-medium transition-colors bg-white dark:bg-gray-600 shadow-sm"
                                id="setting-rad">RAD</button>
                            <button
                                class="flex-1 py-2 rounded-md text-sm font-medium transition-colors text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"
                                id="setting-deg">DEG</button>
                        </div>
                    </div>

                    <!-- Precision -->
                    <div class="flex flex-col gap-2">
                        <div class="flex justify-between">
                            <label class="text-sm font-medium text-gray-700 dark:text-gray-300">Precision
                                (Decimals)</label>
                            <span id="precision-value" class="text-sm text-primary-600 font-medium">8</span>
                        </div>
                        <input type="range" class="w-full accent-primary-600" id="setting-precision" min="0" max="16"
                            value="8" step="1">
                    </div>
                </div>

                <div class="mt-8">
                    <button id="btn-settings-save"
                        class="w-full py-3 rounded-xl bg-primary-600 hover:bg-primary-700 text-white font-medium transition-colors shadow-lg shadow-primary-500/30">
                        Save Changes
                    </button>
                </div>
            </div>
        </div>

    </main>

    <script type="module" src="/js/main.js"></script>
</body>

</html>